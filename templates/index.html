<!-- HTML Frontend (index.html) -->
<!DOCTYPE html>
<html lang="en">
<script>
    // Array of food-related emojis
    const foodEmojis = [
        "🍕", "🍔", "🍣", "🍜", "🍦", "🍩", "🍪", "🥗", "🍉", "🍓", "🍊", "🍇", "🥑", "🍒", "🍪"
    ];

    // Function to set the favicon
    function setFavicon(emoji) {
        const link = document.querySelector("link[rel='icon']") || document.createElement('link');
        link.rel = 'icon';
        link.href = `data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"><text x="0" y="14" font-size="14">${encodeURIComponent(emoji)}</text></svg>`;
        document.head.appendChild(link);
    }

    // Pick a random emoji and set the favicon
    const randomEmoji = foodEmojis[Math.floor(Math.random() * foodEmojis.length)];
    setFavicon(randomEmoji);
    // Set the emoji inside the righttext tag
    window.addEventListener('DOMContentLoaded', (event) => {
        const buttonElement = document.querySelector('.header button');
        if (buttonElement) {
            buttonElement.innerHTML = randomEmoji;  // Insert the emoji
        }
    });
</script>

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.2/jspdf.min.js"></script>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2619788706976082"
     crossorigin="anonymous"></script>


    <canvas id="canvas">Canvas not supported.</canvas>

    <title>Qook</title>
    <link rel="stylesheet" href="/static/css/styles.css">

</head>
<div class = 'header'> <text>Qook - Generative AI Recipe Writer</text>
 <div id='buttonspacer'></div><button id="emojiButton"></button>
</div>
<header>
    <h2>Recipe Generator</h2>
</header>
<body {margin:0}>

    <div class="input-container">
        <div class="textfield-container">
            <input type="text" id="recipeName" placeholder="What are you making?">
            <textarea type="text" id="inputField" placeholder="Type some ingredients..."></textarea>
        </div>
        <button id="micButton" class="off">🎤</button>
    </div>

    <button id="generateButton" class="styled-button">Generate</button>
    <div id="outputContainer" class="'outputContainer" contenteditable="true">
        <h1><u>How does this work?</u></h1>
        <body>Writing recipes can be really <i>really</i> dull, so I made this tool was made to streamline the process, so you can focus on making and sharing good food.</body><br>
        <body>To get the best results, <u>start with the name of the recipe</u>, then include ingredients (and optionally how much of each) you're using to make the dish, and some rough steps.
        <div class="scaredycat"><i>don't worry, the final result is editable!</i></div>
        </body>
        <body>Then, hit generate, and you should be met with a pro-looking recipe that you can save and share!</body>

    </div>
    <div id="saveOptions"  style="display:none;">
        <button id="btn" class="styled-button"> Save Recipe </button>
        <script>
            var button = document.getElementById("btn");
            button.addEventListener("click", function () {
                var doc = new jsPDF();
                var pdf = document.querySelector(".outputContainer");
                doc.fromHTML(pdf);
                doc.fromHTML(outputContainer.innerHTML);
                doc.save("recipe.pdf");
            });
        </script>
    </div>
    <script src="https://apis.google.com/js/platform.js" async defer></script>
    <div id="data-container" host-path="{{path}}"></div>
    <script src="/static/js/bg.js"></script>
    <script src="/static/js/app.js"></script>



</body>
<div class= 'footer'><text>Made by Idris Shaikh |</text><button id='about'>About this page</button> <div id='buttonspacer'></div></div>
<div class="popup-overlay" id="popupOverlay">
    <div class="popup" id="popup">
        <span class="close" id="closePopup">&times;</span>
        <div class="popup-content">
            <h1>About this page</h1>
            <p>The inspo for this page was my mum: She'd been asking me for a while now to keep track of the recipes she'd make, and write them down so she could eventually have a cookbook to share with me and my siblings.</p><br>
            <p>So, naturally, instead of just writing down the recipes, I spent seven months making a website that would let her jot some rough notes on what she was making and then format that into a saveable, sharable recipe. Same as anyone else would also do, I'm sure.</p>
            <p>Anyway, hope this helps, Mum. <3</p>
        </div>
    </div>
</div>

<script>
    document.getElementById('about').addEventListener('click', function () {
    const popupOverlay = document.getElementById('popupOverlay');
    const popup = document.getElementById('popup');
    const closePopup = document.getElementById('closePopup');
    const emailInput = document.getElementById('emailInput');

    function openPopup() {
        popupOverlay.style.display = 'block';
    }

    function closePopupFunc() {
        popupOverlay.style.display = 'none';
    }

    openPopup();

    closePopup.addEventListener('click', closePopupFunc);

    popupOverlay.addEventListener('click', function (event) {
        if (event.target === popupOverlay) {
            closePopupFunc();
        }

    });



});
</script>

</html>
